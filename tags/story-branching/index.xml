<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Story-Branching on {code that works}</title>
    <link>http://localhost:1313/tags/story-branching/?utm_source=site&amp;utm_medium=feed</link>
    <description>Recent content in Story-Branching on {code that works}</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <lastBuildDate>Sun, 29 Apr 2012 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/tags/story-branching/?utm_source=site&amp;utm_medium=feed" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Finding un-merged commits with git cherry</title>
      <link>http://localhost:1313/blog/2012/04/29/finding-un-merged-commits-with-git-cherry/?utm_source=site&amp;utm_medium=feed</link>
      <pubDate>Sun, 29 Apr 2012 00:00:00 +0000</pubDate>
      
      <guid>http://localhost:1313/blog/2012/04/29/finding-un-merged-commits-with-git-cherry/?utm_source=site&amp;utm_medium=feed</guid>
      <description>&lt;p&gt;In a project that I was a part of in the recent past, we used Story Branching. While it afforded us flexibility in pulling and pushing stories in and out of releases, it has given us some scares in the past. Somebody makes commits against a story, but the commit does not get merged to the correct release branch where it is supposed to go or gets merged to another release. The solution was to hunt down the commits that are missing or have creeped in.&lt;/p&gt;
&lt;p&gt;This is where the &lt;a href=&#34;http://linux.die.net/man/1/git-cherry&#34;&gt;git cherry&lt;/a&gt; command is useful. Git cherry finds commits not merged from a branch to another. From the man page:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Every commit that doesn&amp;rsquo;t exist in the upstream branch has its id (sha1) reported, prefixed by a symbol. The ones that have equivalent change already in the upstream branch are prefixed with a minus (-) sign, and those that only exist in the head branch are prefixed with a plus (+) symbol&amp;quot;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Consider the following example. I have two branches - &lt;code&gt;master&lt;/code&gt; and &lt;code&gt;release-23&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;┌─&lt;span style=&#34;color:#555&#34;&gt;[&lt;/span&gt;sdqali&lt;span style=&#34;color:#555&#34;&gt;][&lt;/span&gt;bihzad&lt;span style=&#34;color:#555&#34;&gt;][&lt;/span&gt;±&lt;span style=&#34;color:#555&#34;&gt;][&lt;/span&gt;master ✓&lt;span style=&#34;color:#555&#34;&gt;][&lt;/span&gt;~/src/play/git_cherry_sandbox&lt;span style=&#34;color:#555&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;└─➞  git branch
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;* master
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  release-23
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The branch &lt;code&gt;release-23&lt;/code&gt; has three commits:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;┌─&lt;span style=&#34;color:#555&#34;&gt;[&lt;/span&gt;sdqali&lt;span style=&#34;color:#555&#34;&gt;][&lt;/span&gt;bihzad&lt;span style=&#34;color:#555&#34;&gt;][&lt;/span&gt;±&lt;span style=&#34;color:#555&#34;&gt;][&lt;/span&gt;release-23 ✓&lt;span style=&#34;color:#555&#34;&gt;][&lt;/span&gt;~/src/play/git_cherry_sandbox&lt;span style=&#34;color:#555&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;└─➞  git checkout release-23
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Already on &lt;span style=&#34;color:#c30&#34;&gt;&amp;#39;release-23&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;┌─&lt;span style=&#34;color:#555&#34;&gt;[&lt;/span&gt;sdqali&lt;span style=&#34;color:#555&#34;&gt;][&lt;/span&gt;bihzad&lt;span style=&#34;color:#555&#34;&gt;][&lt;/span&gt;±&lt;span style=&#34;color:#555&#34;&gt;][&lt;/span&gt;release-23 ✓&lt;span style=&#34;color:#555&#34;&gt;][&lt;/span&gt;~/src/play/git_cherry_sandbox&lt;span style=&#34;color:#555&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;└─➞  git log
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;commit f06e4df25724ad0dd51702a10f075d39368e1963
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Author: Sadique Ali &amp;lt;sdqali@bihzad.&lt;span style=&#34;color:#555&#34;&gt;(&lt;/span&gt;none&lt;span style=&#34;color:#555&#34;&gt;)&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Date:   Sun Apr &lt;span style=&#34;color:#f60&#34;&gt;29&lt;/span&gt; 16:51:14 &lt;span style=&#34;color:#f60&#34;&gt;2012&lt;/span&gt; +0530
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Added zoom
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;commit 2a446b1a19253a69c4bb133eedb311c14b2906e8
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Author: Sadique Ali &amp;lt;sdqali@bihzad.&lt;span style=&#34;color:#555&#34;&gt;(&lt;/span&gt;none&lt;span style=&#34;color:#555&#34;&gt;)&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Date:   Sun Apr &lt;span style=&#34;color:#f60&#34;&gt;29&lt;/span&gt; 16:49:25 &lt;span style=&#34;color:#f60&#34;&gt;2012&lt;/span&gt; +0530
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Added bar
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;commit 1afda04ccbf2f834663ca8ec3eaf6e3b917581fb
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Author: Sadique Ali &amp;lt;sdqali@bihzad.&lt;span style=&#34;color:#555&#34;&gt;(&lt;/span&gt;none&lt;span style=&#34;color:#555&#34;&gt;)&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Date:   Sun Apr &lt;span style=&#34;color:#f60&#34;&gt;29&lt;/span&gt; 16:48:05 &lt;span style=&#34;color:#f60&#34;&gt;2012&lt;/span&gt; +0530
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Added foo
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The branch &lt;code&gt;master&lt;/code&gt; have two commits:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;┌─&lt;span style=&#34;color:#555&#34;&gt;[&lt;/span&gt;sdqali&lt;span style=&#34;color:#555&#34;&gt;][&lt;/span&gt;bihzad&lt;span style=&#34;color:#555&#34;&gt;][&lt;/span&gt;±&lt;span style=&#34;color:#555&#34;&gt;][&lt;/span&gt;release-23 ✓&lt;span style=&#34;color:#555&#34;&gt;][&lt;/span&gt;~/src/play/git_cherry_sandbox&lt;span style=&#34;color:#555&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;└─➞  git checkout master
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Switched to branch &lt;span style=&#34;color:#c30&#34;&gt;&amp;#39;master&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;┌─&lt;span style=&#34;color:#555&#34;&gt;[&lt;/span&gt;sdqali&lt;span style=&#34;color:#555&#34;&gt;][&lt;/span&gt;bihzad&lt;span style=&#34;color:#555&#34;&gt;][&lt;/span&gt;±&lt;span style=&#34;color:#555&#34;&gt;][&lt;/span&gt;master ✓&lt;span style=&#34;color:#555&#34;&gt;][&lt;/span&gt;~/src/play/git_cherry_sandbox&lt;span style=&#34;color:#555&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;└─➞  git log
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;commit 8c71e1b2232c1a524e1de20553180676fb971f86
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Author: Sadique Ali &amp;lt;sdqali@bihzad.&lt;span style=&#34;color:#555&#34;&gt;(&lt;/span&gt;none&lt;span style=&#34;color:#555&#34;&gt;)&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Date:   Sun Apr &lt;span style=&#34;color:#f60&#34;&gt;29&lt;/span&gt; 16:49:25 &lt;span style=&#34;color:#f60&#34;&gt;2012&lt;/span&gt; +0530
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Amended. This was Added bar
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;commit 1afda04ccbf2f834663ca8ec3eaf6e3b917581fb
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Author: Sadique Ali &amp;lt;sdqali@bihzad.&lt;span style=&#34;color:#555&#34;&gt;(&lt;/span&gt;none&lt;span style=&#34;color:#555&#34;&gt;)&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Date:   Sun Apr &lt;span style=&#34;color:#f60&#34;&gt;29&lt;/span&gt; 16:48:05 &lt;span style=&#34;color:#f60&#34;&gt;2012&lt;/span&gt; +0530
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Added foo
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;Commit &lt;code&gt;1afda04ccbf2f834663ca8ec3eaf6e3b917581fb (Added foo)&lt;/code&gt; is present in both branches.&lt;/li&gt;
&lt;li&gt;Commit &lt;code&gt;2a446b1a19253a69c4bb133eedb311c14b2906e8 (Added bar)&lt;/code&gt; in the release-23 branch was merged to master, but the commit message was later ammended and its sha became &lt;code&gt;8c71e1b2232c1a524e1de20553180676fb971f86 (Amended. This was Added bar)&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Commit &lt;code&gt;f06e4df25724ad0dd51702a10f075d39368e1963 (Added zoom)&lt;/code&gt; is present only in the release-23 branch.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If we do a &lt;code&gt;git cherry&lt;/code&gt; now with master as the upstream and &lt;code&gt;release-23&lt;/code&gt; as head:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;┌─&lt;span style=&#34;color:#555&#34;&gt;[&lt;/span&gt;sdqali&lt;span style=&#34;color:#555&#34;&gt;][&lt;/span&gt;bihzad&lt;span style=&#34;color:#555&#34;&gt;][&lt;/span&gt;±&lt;span style=&#34;color:#555&#34;&gt;][&lt;/span&gt;master ✓&lt;span style=&#34;color:#555&#34;&gt;][&lt;/span&gt;~/src/play/git_cherry_sandbox&lt;span style=&#34;color:#555&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;└─➞  git cherry master release-23 -v
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;- 2a446b1a19253a69c4bb133eedb311c14b2906e8 Added bar
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;+ f06e4df25724ad0dd51702a10f075d39368e1963 Added zoom
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;script &lt;span style=&#34;color:#033&#34;&gt;src&lt;/span&gt;&lt;span style=&#34;color:#555&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#c30&#34;&gt;&amp;#34;https://gist.github.com/2549897.js?file=gistfile1.sh&amp;#34;&lt;/span&gt;&amp;gt;&amp;lt;/script&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This tells us that&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;An equivalent of commit &lt;code&gt;2a446b1a19253a69c4bb133eedb311c14b2906e8 (Added bar)&lt;/code&gt; is present in the master branch, as indicated by the (-) sign.&lt;/li&gt;
&lt;li&gt;Commit &lt;code&gt;f06e4df25724ad0dd51702a10f075d39368e1963 (Added zoom)&lt;/code&gt; is present only in the release-23 branch, as indicated by the (+) sign.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;If we were to do &lt;code&gt;&amp;lt;b&amp;gt;git cherry&amp;lt;/b&amp;gt;&lt;/code&gt; the other way around, ie. with release-23 as the upstream and master as the head:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;┌─&lt;span style=&#34;color:#555&#34;&gt;[&lt;/span&gt;sdqali&lt;span style=&#34;color:#555&#34;&gt;][&lt;/span&gt;bihzad&lt;span style=&#34;color:#555&#34;&gt;][&lt;/span&gt;±&lt;span style=&#34;color:#555&#34;&gt;][&lt;/span&gt;master ✓&lt;span style=&#34;color:#555&#34;&gt;][&lt;/span&gt;~/src/play/git_cherry_sandbox&lt;span style=&#34;color:#555&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;└─➞  git cherry release-23 master -v
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;- 8c71e1b2232c1a524e1de20553180676fb971f86 Amended. This was Added bar
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This tells us that&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;An equivalent of commit &lt;code&gt;8c71e1b2232c1a524e1de20553180676fb971f86 (Amended. This was Added bar)&lt;/code&gt; is present in the master branch, as indicated by the (-) sign.&lt;/li&gt;
&lt;li&gt;There are no commits in &lt;code&gt;master&lt;/code&gt; that are not present in &lt;code&gt;release-23&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;That is pretty much what the &lt;code&gt;git cherry&lt;/code&gt; command does.&lt;/p&gt;</description>
    </item>
    
  </channel>
</rss>
